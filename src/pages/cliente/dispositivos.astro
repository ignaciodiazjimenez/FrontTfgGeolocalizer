---
// src/pages/cliente/dispositivos.astro

import BaseLayout from "../../layouts/BaseLayout.astro";
import RutaProtegida from "../../components/RutaProtegida.jsx";
import DeviceManager from "../../components/DeviceManager.jsx";

// Opciones para el layout
const showSidebar = true;
const showHeader = true;
const showGreeting = false;
const showFooter = true;

// El cliente debe ser un “cliente” (no admin) para ver esta página
const allowedRole = "user";
const redirectTo = "/login";
---

<BaseLayout
  showSidebar={showSidebar}
  showHeader={showHeader}
  showGreeting={showGreeting}
  showFooter={showFooter}
>
  <!-- Hidratamos el componente de protección de ruta y su hijo DeviceManager -->
  <RutaProtegida
    client:load
    allowedRole={allowedRole}
    redirectTo={redirectTo}
  >
    <DeviceManager  client:load/>
  </RutaProtegida>
</BaseLayout>
